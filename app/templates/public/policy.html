{% extends 'layouts/base.html' %} {% block title %}Chính sách - {{
get_setting('website_name', 'BRICON VIỆT NAM | Keo của người Việt') }}{%
endblock %} {% block meta_description %}Chính sách vận chuyển, đổi trả, bảo hành
và bảo mật của {{ get_setting('website_name', 'BRICON VIỆT NAM') }}.{% endblock
%} {% block content %}
<!-- ==================== BREADCRUMB ==================== -->
<div class="page-header bg-light py-4">
  <div class="container">
    <h1 class="fw-bold">Chính sách</h1>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="{{ url_for('main.index') }}">Trang chủ</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Chính sách</li>
      </ol>
    </nav>
  </div>
</div>

<!-- ==================== POLICY CONTENT ==================== -->
<section class="py-5" itemscope itemtype="https://schema.org/WebPage">
  <div class="container">
    {# Check if any policy content exists #} {% set terms =
    get_setting('terms_of_service', '') %} {% set shipping =
    get_setting('shipping_policy', '') %} {% set return_pol =
    get_setting('return_policy', '') %} {% set warranty =
    get_setting('warranty_policy', '') %} {% set privacy =
    get_setting('privacy_policy', '') %} {% set has_any_policy = terms or
    shipping or return_pol or warranty or privacy %} {% if not has_any_policy %}
    <!-- No policies available message -->
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card shadow-sm border-0 text-center py-5">
          <div class="card-body">
            <i
              class="bi bi-file-earmark-text text-muted"
              style="font-size: 4rem"
            ></i>
            <h3 class="mt-3 mb-2">Chưa có chính sách nào</h3>
            <p class="text-muted mb-4">
              Các chính sách của BRICON đang được cập nhật. Vui lòng quay lại
              sau hoặc liên hệ với chúng tôi để biết thêm chi tiết.
            </p>
            <div class="d-flex gap-2 justify-content-center flex-wrap">
              <a
                href="tel:{{ get_setting('hotline', '0901180094')|replace('.', '')|replace(' ', '') }}"
                class="btn btn-warning"
              >
                <i class="bi bi-telephone-fill me-2"></i>
                {{ get_setting('hotline', '0901.180.094') }}
              </a>
              <a
                href="{{ url_for('main.contact') }}"
                class="btn btn-outline-warning"
              >
                <i class="bi bi-envelope me-2"></i>
                Liên hệ với chúng tôi
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% else %}
    <div class="row">
      <!-- Sidebar Navigation -->
      <div class="col-lg-2 mb-4">
        <div class="list-group sticky-top" style="top: 100px; z-index: 10">
          {% if terms %}
          <a href="#terms" class="list-group-item list-group-item-action">
            Điều khoản dịch vụ
          </a>
          {% endif %} {% if shipping %}
          <a href="#shipping" class="list-group-item list-group-item-action">
            Chính sách vận chuyển
          </a>
          {% endif %} {% if return_pol %}
          <a href="#return" class="list-group-item list-group-item-action">
            Chính sách đổi trả
          </a>
          {% endif %} {% if warranty %}
          <a href="#warranty" class="list-group-item list-group-item-action">
            Chính sách bảo hành
          </a>
          {% endif %} {% if privacy %}
          <a href="#privacy" class="list-group-item list-group-item-action">
            Chính sách bảo mật
          </a>
          {% endif %}
        </div>
      </div>

      <!-- Policy Content -->
      <div class="col-lg-10">
        <!-- ✅ ĐIỀU KHOẢN DỊCH VỤ -->
        {% if terms %}
        <div class="card shadow-sm border-0 mb-4" id="terms">
          <div class="card-header bg-warning">
            <h3 class="mb-0 text-center">
              <i class="bi bi-file-earmark-text me-2"></i>Điều khoản dịch vụ
            </h3>
          </div>
          <div class="card-body">{{ terms | safe }}</div>
        </div>
        {% endif %}

        <!-- Chính sách vận chuyển -->
        {% if shipping %}
        <div class="card shadow-sm border-0 mb-4" id="shipping">
          <div class="card-header bg-warning">
            <h3 class="mb-0 text-center">
              <i class="bi bi-truck me-2"></i>Chính sách vận chuyển
            </h3>
          </div>
          <div class="card-body">{{ shipping | safe }}</div>
        </div>
        {% endif %}

        <!-- Chính sách đổi trả -->
        {% if return_pol %}
        <div class="card shadow-sm border-0 mb-4" id="return">
          <div class="card-header bg-warning">
            <h3 class="mb-0 text-center">
              <i class="bi bi-arrow-repeat me-2"></i>Chính sách đổi trả
            </h3>
          </div>
          <div class="card-body">{{ return_pol | safe }}</div>
        </div>
        {% endif %}

        <!-- Chính sách bảo hành -->
        {% if warranty %}
        <div class="card shadow-sm border-0 mb-4" id="warranty">
          <div class="card-header bg-warning">
            <h3 class="mb-0 text-center">
              <i class="bi bi-shield-check me-2"></i>Chính sách bảo hành
            </h3>
          </div>
          <div class="card-body">{{ warranty | safe }}</div>
        </div>
        {% endif %}

        <!-- Chính sách bảo mật -->
        {% if privacy %}
        <div class="card shadow-sm border-0 mb-4" id="privacy">
          <div class="card-header bg-warning">
            <h3 class="mb-0 text-center">
              <i class="bi bi-lock me-2"></i>Chính sách bảo mật
            </h3>
          </div>
          <div class="card-body">{{ privacy | safe }}</div>
        </div>
        {% endif %}

        <!-- CTA Section -->
        <div class="card shadow-sm border-0 bg-light">
          <div class="card-body text-center py-4">
            <h5 class="fw-bold mb-3">Bạn còn thắc mắc về chính sách?</h5>
            <p class="text-muted mb-4">
              Liên hệ ngay với BRICON để được giải đáp chi tiết
            </p>
            <div class="d-flex gap-2 justify-content-center flex-wrap">
              <a
                href="tel:{{ get_setting('hotline', '0901180094')|replace('.', '')|replace(' ', '') }}"
                class="btn btn-warning"
              >
                <i class="bi bi-telephone-fill me-2"></i>
                {{ get_setting('hotline', '0901.180.094') }}
              </a>
              <a
                href="{{ url_for('main.contact') }}"
                class="btn btn-outline-warning"
              >
                <i class="bi bi-envelope me-2"></i>
                Gửi câu hỏi
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</section>

<!-- ==================== SCHEMA.ORG - WEB PAGE ==================== -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Chính sách - {{ get_setting('website_name', 'BRICON VIỆT NAM')|e }}",
    "url": "{{ url_for('main.policy', _external=True) }}",
    "description": "Chính sách đổi trả và bảo mật của {{ get_setting('website_name', 'BRICON VIỆT NAM')|e }}",
    "publisher": {
      "@type": "Organization",
      "name": "{{ get_setting('website_name', 'BRICON VIỆT NAM')|e }}",
      "url": "{{ get_setting('main_url', request.url_root)|e }}"
    }
  }
</script>

<!-- ==================== SCHEMA.ORG - BREADCRUMB ==================== -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Trang chủ",
        "item": "{{ url_for('main.index', _external=True) }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Chính sách",
        "item": "{{ url_for('main.policy', _external=True) }}"
      }
    ]
  }
</script>
<style>
.card-header {
  background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%) !important;
  color: #000 !important;
}

.card-header h3,
.card-header h2 {
  color: #000 !important;
}

html {
  scroll-behavior: smooth;
}
</style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Xử lý scroll khi trang load với hash
    if (window.location.hash) {
      setTimeout(function () {
        const target = document.querySelector(window.location.hash);
        if (target) {
          const offsetTop =
            target.getBoundingClientRect().top + window.pageYOffset - 140;
          window.scrollTo({
            top: offsetTop,
            behavior: "smooth",
          });
        }
      }, 100);
    }

    // Smooth scroll cho sidebar links
    document.querySelectorAll('.list-group a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        const targetId = this.getAttribute("href");
        const target = document.querySelector(targetId);

        if (target) {
          // Scroll đến vị trí với offset cho sticky header (140px = navbar + padding)
          const offsetTop =
            target.getBoundingClientRect().top + window.pageYOffset - 140;
          window.scrollTo({
            top: offsetTop,
            behavior: "smooth",
          });

          // Update URL hash
          history.pushState(null, null, targetId);
        }
      });
    });

    // Xử lý khi click từ footer (external links)
    window.addEventListener("hashchange", function () {
      const target = document.querySelector(window.location.hash);
      if (target) {
        const offsetTop =
          target.getBoundingClientRect().top + window.pageYOffset - 140;
        window.scrollTo({
          top: offsetTop,
          behavior: "smooth",
        });
      }
    });
  });
</script>
{% endblock %}
